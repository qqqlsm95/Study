스택(Stack)과 힙(Heap)은 프로그램이 메모리를 관리하는 두 가지 주요 영역입니다. 둘 다 메모리를 할당하고 사용할 수 있는 방식이 다르기 때문에 각각의 용도와 특징이 명확하게 구분됩니다.

### 1. 스택(Stack)

- **메모리 할당 방식**: 스택은 함수 호출과 관련된 메모리 공간을 할당하는데 사용됩니다. 함수가 호출될 때마다 그 함수의 지역 변수나 매개변수들이 스택에 쌓이며, 함수가 종료되면 스택에서 해당 메모리 공간이 자동으로 해제됩니다.
- **구조**: 스택은 LIFO (Last In, First Out) 구조로 동작합니다. 마지막에 할당된 메모리 블록이 먼저 해제됩니다. 이는 스택이 함수 호출과 함께 메모리를 효율적으로 관리할 수 있도록 합니다.
- **특징**:
    - 메모리 할당 및 해제가 매우 빠릅니다.
    - 정적 할당으로, 크기가 고정된 데이터(예: 함수의 지역 변수) 저장에 적합합니다.
    - 제한된 메모리 공간을 가지고 있으며, 깊은 함수 호출이나 큰 메모리를 요구하는 경우 **스택 오버플로우**가 발생할 수 있습니다.
    - **자동 해제**: 함수가 종료되면 해당 함수의 메모리가 자동으로 해제되기 때문에 메모리 관리를 신경 쓸 필요가 없습니다.
- **사용 예시**: 지역 변수, 함수 매개변수 등.

### 2. 힙(Heap)

- **메모리 할당 방식**: 힙은 프로그래머가 동적으로 메모리를 할당하는 공간입니다. 프로그램 실행 중에 필요할 때마다 메모리를 할당하고 필요가 없어지면 해제할 수 있습니다.
- **구조**: 힙은 구조적으로 스택과는 달리 자유롭게 메모리의 할당과 해제를 할 수 있습니다. 메모리 블록들은 임의의 순서로 할당되며, 그 결과 메모리가 단편화될 수 있습니다.
- **특징**:
    - 메모리 할당 및 해제는 스택에 비해 상대적으로 느립니다. 이는 힙이 관리할 수 있는 메모리 블록들이 많고, 효율적인 메모리 관리를 위해 포인터 기반의 메모리 관리가 필요하기 때문입니다.
    - 사용자는 메모리 할당 후, 필요할 때 **명시적으로 해제**해야 합니다. 해제하지 않을 경우 **메모리 누수**(Memory Leak)가 발생할 수 있습니다.
    - 할당할 수 있는 메모리의 크기가 크기 때문에 크기가 동적으로 변화하는 데이터를 저장하는 데 적합합니다.
- **사용 예시**: 동적으로 할당된 메모리(예: `new` 연산자를 사용한 객체), 배열 등.

### 스택과 힙의 차이점 요약

| 특성 | 스택(Stack) | 힙(Heap) |
| --- | --- | --- |
| 할당 방식 | 정적 할당, 자동 할당 | 동적 할당, 수동 해제 필요 |
| 접근 속도 | 빠름 | 느림 |
| 메모리 크기 | 제한적 (작은 공간) | 크고 유동적인 공간 |
| 데이터 유형 | 지역 변수, 함수 매개변수 | 동적 객체, 배열 등 |
| 메모리 관리 | 자동 해제 | 명시적 해제 (`delete` 등) 필요 |
| 오류 | 스택 오버플로우 | 메모리 누수, 힙 단편화 |

### 스택과 힙 사용의 실제 예시 (C++ 기준)

- **스택**:
    
    ```cpp
    void myFunction() {
        int a = 10; // 지역 변수, 스택에 저장
    }
    ```
    
    함수가 호출되면 `a`가 스택에 할당되고, 함수가 종료되면 `a`의 메모리가 자동으로 해제됩니다.
    
- **힙**:
    
    ```cpp
    void myFunction() {
        int* p = new int(10); // 힙에 메모리 할당
        // 할당된 메모리 사용
        delete p; // 메모리 해제 (명시적으로 필요)
    }
    ```
    
    여기서 `p`는 힙에서 메모리를 할당받았고, 사용 후 `delete`를 사용하여 명시적으로 해제해야 합니다. 그렇지 않으면 프로그램 종료 시까지 메모리가 해제되지 않아 메모리 누수가 발생할 수 있습니다.
    

### 메모리 효율과 주의점

- **스택**은 함수의 호출과 함께 자동으로 메모리를 관리해주므로 관리가 용이하지만, 공간이 제한적이기 때문에 큰 데이터를 스택에 할당하면 위험합니다.
- **힙**은 메모리 할당을 자유롭게 할 수 있지만, 사용 후 반드시 해제해야 하기 때문에 메모리 누수에 유의해야 합니다. 특히 C++ 같은 언어에서는 메모리 관리가 중요합니다. C++11 이후에는 스마트 포인터(`std::shared_ptr`, `std::unique_ptr`)를 사용하여 메모리 누수를 방지할 수 있습니다.